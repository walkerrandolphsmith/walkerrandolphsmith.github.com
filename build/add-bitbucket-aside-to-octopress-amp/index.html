<!doctype html>
<html ⚡>
  <head>
    <title>Walker Randolph Smith</title>
    <meta name="description" content="Adding Bitbucket repositories to your Octopress blog." />
    <meta name="author" content="Walker Randolph Smith" />
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="canonical" href="http://walkerrandolphsmith.github.com/" />
    
    <link rel="amphtml" href="http://www.walkerrandolphsmith.com/add-bitbucket-aside-to-octopress-amp-amp/">
    <link rel="alternate" type="application/rss+xml" title="Walker Randolph Smith" href="http://www.walkerrandolphsmith.com/rss/">
    
    <meta name="referrer" content="no-referrer-when-downgrade">
    
    <link rel="icon" type="image/png" href="http://www.walkerrandolphsmith.com/css/images/profile.png" />
    <link rel="apple-touch-icon" sizes="57x57" href="http://www.walkerrandolphsmith.com/css/images/apple-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="http://www.walkerrandolphsmith.com/css/images/apple-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="http://www.walkerrandolphsmith.com/css/images/apple-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="http://www.walkerrandolphsmith.com/css/images/apple-icon-144x144.png" />
    
    <meta property="og:site_name" content="Walker Randolph Smith" />
    <meta property="og:title" content="Add Bitbucket Aside to Octopress-amp" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="http://www.walkerrandolphsmith.com/add-bitbucket-aside-to-octopress-amp" />
    <meta property="og:description" content="Adding Bitbucket repositories to your Octopress blog." />
    <meta property="og:image" content="http://www.walkerrandolphsmith.com/css/images/e.png" />
    <meta property="og:image:width" content="1920">
    <meta property="og:image:height" content="1080">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Add Bitbucket Aside to Octopress-amp">
    <meta name="twitter:description" content="Adding Bitbucket repositories to your Octopress blog.">
    <meta name="twitter:url" content="http://www.walkerrandolphsmith.com/add-bitbucket-aside-to-octopress-amp">
    <meta name="twitter:image" content="http://www.walkerrandolphsmith.com/css/images/e.png">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="Walker Randolph Smith">
    <style amp-custom>
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        h1 {
            margin-left: 20px;
            font-size: 2em;
            font-weight: 600;
            line-height: 62px;
            letter-spacing: -1px;
            color: #373737;
        }
        header ul {
            margin-right: 20px;
        }
        article {
            padding: 90px;
        }
        h2 {
            margin: 50px 0 30px;
            font-size: 28px;
            font-weight: 600;
            line-height: 44px;
            letter-spacing: -1px;
            color: #494a50;
        }

        h3 {
            margin: 50px 0 30px;
            font-size: 28px;
            font-weight: 400;
            line-height: 44px;
            letter-spacing: -1px;
            color: #b2b2b2;
        }
        p {
            font-weight: 400;
            font-size: 17px;
            line-height: 32px;
            margin: 20px 0 65px;
            color: #62646c;
        }
        ul, ol {
            list-style: none;
        }

        pre {
          padding: 2em;
        }

        code, pre {
          font-family: Consolas, Menlo, Monaco, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", "Nimbus Mono L", "Courier New", Courier, monospace;
          font-size: 14px;
          line-height: 1.375;
          direction: ltr;
          text-align: left;
          white-space: pre;
          word-spacing: normal;
          word-break: normal;

          -moz-tab-size: 4;
          -o-tab-size: 4;
          tab-size: 4;

          -webkit-hyphens: none;
          -moz-hyphens: none;
          -ms-hyphens: none;
          hyphens: none;
          background: #faf8f5;
          line-height: 30px;

          margin: .5em 0;
          overflow: auto;
        }

        p > code {
          padding: 0.5em;
        }

        code[class*="language-"],
        pre[class*="language-"] {
          color: #728fcb;
        }

        pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
        code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
          text-shadow: none;
          background: #faf8f5;
        }

        pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
        code[class*="language-"]::selection, code[class*="language-"] ::selection {
          text-shadow: none;
          background: #faf8f5;
        }

        pre[class*="language-"] {
          padding: 1em;
          margin: .5em 0;
          overflow: auto;
        }

        :not(pre) > code[class*="language-"] {
          padding: .1em;
          border-radius: .3em;
        }

        .token.comment,
        .token.prolog,
        .token.doctype,
        .token.cdata {
          color: #b6ad9a;
        }

        .token.punctuation {
          color: #b6ad9a;
        }

        .token.namespace {
          opacity: .7;
        }

        .token.tag,
        .token.operator,
        .token.number {
          color: #063289;
        }

        .token.property,
        .token.function {
          color: #b29762;
        }

        .token.tag-id,
        .token.selector,
        .token.atrule-id {
          color: #2d2006;
        }

        code.language-javascript,
        .token.attr-name {
          color: #896724;
        }

        code.language-css,
        code.language-scss,
        .token.boolean,
        .token.string,
        .token.entity,
        .token.url,
        .language-css .token.string,
        .language-scss .token.string,
        .style .token.string,
        .token.attr-value,
        .token.keyword,
        .token.control,
        .token.directive,
        .token.unit,
        .token.statement,
        .token.regex,
        .token.atrule {
          color: #728fcb;
        }

        .token.placeholder,
        .token.variable {
          color: #93abdc;
        }

        .token.deleted {
          text-decoration: line-through;
        }

        .token.inserted {
          border-bottom: 1px dotted #2d2006;
          text-decoration: none;
        }

        .token.italic {
          font-style: italic;
        }

        .token.important,
        .token.bold {
          font-weight: bold;
        }

        .token.important {
          color: #896724;
        }

        .token.entity {
          cursor: help;
        }

        pre > code.highlight {
          outline: .4em solid #896724;
          outline-offset: .4em;
        }

        .line-numbers .line-numbers-rows {
          border-right-color: #ece8de;
        }

        .line-numbers-rows > span:before {
          color: #cdc4b1;
        }

        .line-highlight {
          background: rgba(45, 32, 6, 0.2);
          background: -webkit-linear-gradient(left, rgba(45, 32, 6, 0.2) 70%, rgba(45, 32, 6, 0));
          background: linear-gradient(to right, rgba(45, 32, 6, 0.2) 70%, rgba(45, 32, 6, 0));
        }

        footer {
            padding-left: 90px;
        }
    </style>

    <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Article",
      "headline": "Add Bitbucket Aside to Octopress",
      "datePublished": "Thu Jul 04 2013 20:00:00 GMT-0400 (EDT)",
      "description": "Adding Bitbucket repositories to your Octopress blog.",
      "author": {
        "@type": "Person",
        "name": "Walker Randolph Smith"
      },
      "image": {
        "@type": "ImageObject",
        "url": "http://www.walkerrandolphsmith.com/css/images/e.png",
        "height": 2000,
        "width": 800
      }
    }
    </script>
    <script async custom-element="amp-carousel" src="https://cdn.ampproject.org/v0/amp-carousel-0.1.js"></script>
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <script async src="https://cdn.ampproject.org/v0.js"></script>
  </head>
  <body>
    <main>
        <section class="post-item post-title">
            <header>
                <h1>Add Bitbucket Aside to Octopress</h1>
                <ul class="meta">
                    <li class="date">
                        <time datetime="July 4, 2013">July 4, 2013</time>
                    </li>
                    <li style="display: none;">
                        <a href="http://www.walkerrandolphsmith.com/resume/" class="author">
                            <img src="http://www.walkerrandolphsmith.com/css/images/kakashi.png" alt="Walker Randolph Smith" data-no-retina="true">
                            <span>Walker Randolph Smith</span>
                        </a>
                    </li>
                </ul>
            </header>
            <amp-img src="http://www.walkerrandolphsmith.com/css/images/e.png"
                 width="264" height="96" layout="responsive">
            </amp-img>
        </section>
        <section>
            <article>
                <p>
                  Adding public repositories hosted on Bitbucket to your blog is a great idea to showcase your projects.
Checking out how the Github aside works will help, as they are similar.
However, unlike Github, repository names on Bitbucket can have white space, but the URL to a repository is stripped of white space and every letter is converted to lowercase.
<h2 id="update-main-configuration">Update main configuration</h2>
<p>In the <code>_config.yml</code> add the following lines:</p>
<pre><code># Bitbucket repositories
bitbucket_user: your-user-name
bitbucket_repo_count: 5
bitbucket_show_profile_link: true
bitbucket_skip_forks: true</code></pre>
<p>If the view will be added to the sidebar you will also need to add the, yet to exist, bitbucket.html view to the appropriate aside. In this case add the repositories to the default asides.</p>
<pre><code>blog_index_asides: [custom/asides/bitbucket.html, asides/github.html]</code></pre>
<h2 id="add-the-view">Add the View</h2>
<p>In the previous code block the path preceding bitbucket.html indicates where to make a new html file named bitbucket.</p>
<pre><code>{% if site.bitbucket_user %}
<span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>section</span><span class="token punctuation" >></span></span>
  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>h1</span><span class="token punctuation" >></span></span>Bitbucket Repos<span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>h1</span><span class="token punctuation" >></span></span>
  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>ul</span> <span class="token attr-name" >id</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >"</span>bb_repos<span class="token punctuation" >"</span></span><span class="token punctuation" >></span></span>
    <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>li</span> <span class="token attr-name" >class</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >"</span>loading<span class="token punctuation" >"</span></span><span class="token punctuation" >></span></span>Status updating...<span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>li</span><span class="token punctuation" >></span></span>
  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>ul</span><span class="token punctuation" >></span></span>
  {% if site.bitbucket_show_profile_link %}
  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>a</span> <span class="token attr-name" >href</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >"</span>https://bitbucket.org/{{site.bitbucket_user}}<span class="token punctuation" >"</span></span><span class="token punctuation" >></span></span>@{{site.bitbucket_user}}<span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>a</span><span class="token punctuation" >></span></span> on Bitbucket
  {% endif %}

  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>script</span> <span class="token attr-name" >type</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >"</span>text/javascript<span class="token punctuation" >"</span></span><span class="token punctuation" >></span></span><span class="token script language-javascript" >
    $<span class="token punctuation" >.</span><span class="token function" >domReady</span><span class="token punctuation" >(</span><span class="token keyword" >function</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >{</span>
        <span class="token keyword" >if</span> <span class="token punctuation" >(</span><span class="token operator" >!</span>window<span class="token punctuation" >.</span>jXHR<span class="token punctuation" >)</span><span class="token punctuation" >{</span>
            <span class="token keyword" >var</span> jxhr <span class="token operator" >=</span> document<span class="token punctuation" >.</span><span class="token function" >createElement</span><span class="token punctuation" >(</span><span class="token string" >'script'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
            jxhr<span class="token punctuation" >.</span>type <span class="token operator" >=</span> <span class="token string" >'text/javascript'</span><span class="token punctuation" >;</span>
            jxhr<span class="token punctuation" >.</span>src <span class="token operator" >=</span> <span class="token string" >'{{root_url}}/javascripts/libs/jXHR.js'</span><span class="token punctuation" >;</span>
            <span class="token keyword" >var</span> s <span class="token operator" >=</span> document<span class="token punctuation" >.</span><span class="token function" >getElementsByTagName</span><span class="token punctuation" >(</span><span class="token string" >'script'</span><span class="token punctuation" >)</span><span class="token punctuation" >[</span><span class="token number" >0</span><span class="token punctuation" >]</span><span class="token punctuation" >;</span>
            s<span class="token punctuation" >.</span>parentNode<span class="token punctuation" >.</span><span class="token function" >insertBefore</span><span class="token punctuation" >(</span>jxhr<span class="token punctuation" >,</span> s<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
        <span class="token punctuation" >}</span>

        bitbucket<span class="token punctuation" >.</span><span class="token function" >showRepos</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
            user<span class="token punctuation" >:</span> <span class="token string" >'{{site.bitbucket_user}}'</span><span class="token punctuation" >,</span>
            count<span class="token punctuation" >:</span> <span class="token punctuation" >{</span><span class="token punctuation" >{</span>site<span class="token punctuation" >.</span>bitbucket_repo_count<span class="token punctuation" >}</span><span class="token punctuation" >}</span><span class="token punctuation" >,</span>
            target<span class="token punctuation" >:</span> <span class="token string" >'#bb_repos'</span>
        <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  </span><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>script</span><span class="token punctuation" >></span></span>
  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>script</span> <span class="token attr-name" >src</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >"</span>{{ root_url }}/javascripts/bitbucket.js<span class="token punctuation" >"</span></span> <span class="token attr-name" >type</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >"</span>text/javascript<span class="token punctuation" >"</span></span><span class="token punctuation" >></span></span><span class="token script language-javascript" > </span><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>script</span><span class="token punctuation" >></span></span>
<span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>section</span><span class="token punctuation" >></span></span>
{% endif %}</code></pre>
<p>The object, bitbucket will be defined in the following script:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword" >var</span> bitbucket <span class="token operator" >=</span> <span class="token punctuation" >(</span><span class="token keyword" >function</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >function</span> <span class="token function" >render</span><span class="token punctuation" >(</span>user<span class="token punctuation" >,</span> target<span class="token punctuation" >,</span> repos<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
        <span class="token keyword" >var</span> i <span class="token operator" >=</span> <span class="token number" >0</span><span class="token punctuation" >,</span>
            fragment <span class="token operator" >=</span> <span class="token string" >''</span><span class="token punctuation" >,</span>
            t <span class="token operator" >=</span> <span class="token function" >$</span><span class="token punctuation" >(</span>target<span class="token punctuation" >)</span><span class="token punctuation" >[</span><span class="token number" >0</span><span class="token punctuation" >]</span><span class="token punctuation" >;</span>

        <span class="token keyword" >for</span> <span class="token punctuation" >(</span>i <span class="token operator" >=</span> <span class="token number" >0</span><span class="token punctuation" >;</span> i <span class="token operator" >&lt;</span> repos<span class="token punctuation" >.</span>length<span class="token punctuation" >;</span> i<span class="token operator" >++</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
            fragment <span class="token operator" >+</span><span class="token operator" >=</span> <span class="token string" >'&lt;li>&lt;a href="https://bitbucket.org/'</span> <span class="token operator" >+</span> user <span class="token operator" >+</span> <span class="token string" >'/'</span> <span class="token operator" >+</span> repos<span class="token punctuation" >[</span>i<span class="token punctuation" >]</span><span class="token punctuation" >.</span>name<span class="token punctuation" >.</span><span class="token function" >replace</span><span class="token punctuation" >(</span><span class="token regex" >/\s+/g</span><span class="token punctuation" >,</span> <span class="token string" >'-'</span><span class="token punctuation" >)</span><span class="token punctuation" >.</span><span class="token function" >toLowerCase</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >+</span> <span class="token string" >'">'</span> <span class="token operator" >+</span> repos<span class="token punctuation" >[</span>i<span class="token punctuation" >]</span><span class="token punctuation" >.</span>name <span class="token operator" >+</span> <span class="token string" >'&lt;/a>&lt;p>'</span> <span class="token operator" >+</span> repos<span class="token punctuation" >[</span>i<span class="token punctuation" >]</span><span class="token punctuation" >.</span>description <span class="token operator" >+</span> <span class="token string" >'&lt;/p>&lt;/li>'</span><span class="token punctuation" >;</span>
            console<span class="token punctuation" >.</span><span class="token function" >log</span><span class="token punctuation" >(</span>repos<span class="token punctuation" >[</span>i<span class="token punctuation" >]</span><span class="token punctuation" >.</span>name<span class="token punctuation" >.</span><span class="token function" >replace</span><span class="token punctuation" >(</span><span class="token regex" >/\s+/g</span><span class="token punctuation" >,</span> <span class="token string" >'-'</span><span class="token punctuation" >)</span><span class="token punctuation" >.</span><span class="token function" >toLowerCase</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >)</span>
        <span class="token punctuation" >}</span>
        t<span class="token punctuation" >.</span>innerHTML <span class="token operator" >=</span> fragment<span class="token punctuation" >;</span>
    <span class="token punctuation" >}</span>
    <span class="token keyword" >return</span> <span class="token punctuation" >{</span>
        showRepos<span class="token punctuation" >:</span> <span class="token keyword" >function</span><span class="token punctuation" >(</span>options<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
            <span class="token keyword" >var</span> host<span class="token operator" >=</span><span class="token string" >"api.bitbucket.org/1.0/users/"</span>
            <span class="token keyword" >var</span> auth <span class="token operator" >=</span> <span class="token punctuation" >(</span>options<span class="token punctuation" >.</span>password<span class="token punctuation" >)</span> <span class="token operator" >?</span> <span class="token punctuation" >(</span>options<span class="token punctuation" >.</span>user<span class="token operator" >+</span><span class="token string" >":"</span><span class="token operator" >+</span>options<span class="token punctuation" >.</span>password<span class="token operator" >+</span><span class="token string" >"@"</span><span class="token punctuation" >)</span> <span class="token punctuation" >:</span> <span class="token string" >""</span><span class="token punctuation" >;</span>

            $<span class="token punctuation" >.</span><span class="token function" >ajax</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
                url<span class="token punctuation" >:</span> <span class="token string" >"https://"</span><span class="token operator" >+</span>auth<span class="token operator" >+</span>host<span class="token operator" >+</span>options<span class="token punctuation" >.</span>user <span class="token operator" >+</span> <span class="token string" >"?callback=?"</span><span class="token punctuation" >,</span>
                type<span class="token punctuation" >:</span> <span class="token string" >"jsonp"</span><span class="token punctuation" >,</span>
                error<span class="token punctuation" >:</span> <span class="token keyword" >function</span><span class="token punctuation" >(</span>err<span class="token punctuation" >,</span> status<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
                    <span class="token function" >$</span><span class="token punctuation" >(</span>options<span class="token punctuation" >.</span>target <span class="token operator" >+</span> <span class="token string" >' li.loading'</span><span class="token punctuation" >)</span><span class="token punctuation" >.</span><span class="token function" >addClass</span><span class="token punctuation" >(</span><span class="token string" >'error'</span><span class="token punctuation" >)</span><span class="token punctuation" >.</span><span class="token function" >text</span><span class="token punctuation" >(</span><span class="token string" >"Error loading feed"</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
                <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
                success<span class="token punctuation" >:</span> <span class="token keyword" >function</span><span class="token punctuation" >(</span>data<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
                    <span class="token keyword" >var</span> repos <span class="token operator" >=</span> <span class="token punctuation" >[</span><span class="token punctuation" >]</span><span class="token punctuation" >;</span>
                    <span class="token keyword" >if</span> <span class="token punctuation" >(</span><span class="token operator" >!</span>data <span class="token operator" >||</span> <span class="token operator" >!</span>data<span class="token punctuation" >.</span>repositories<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
                        <span class="token keyword" >return</span><span class="token punctuation" >;</span>
                    <span class="token punctuation" >}</span>
                    <span class="token keyword" >for</span> <span class="token punctuation" >(</span><span class="token keyword" >var</span> i <span class="token operator" >=</span> <span class="token number" >0</span><span class="token punctuation" >;</span> i <span class="token operator" >&lt;</span> data<span class="token punctuation" >.</span>repositories<span class="token punctuation" >.</span>length<span class="token punctuation" >;</span> i<span class="token operator" >++</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
                        <span class="token keyword" >if</span> <span class="token punctuation" >(</span>options<span class="token punctuation" >.</span>skip_forks <span class="token operator" >&amp;&amp;</span> data<span class="token punctuation" >.</span>repositories<span class="token punctuation" >[</span>i<span class="token punctuation" >]</span><span class="token punctuation" >.</span>is_fork<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
                            <span class="token keyword" >continue</span><span class="token punctuation" >;</span>
                        <span class="token punctuation" >}</span>
                        <span class="token keyword" >if</span> <span class="token punctuation" >(</span>options<span class="token punctuation" >.</span>require_wiki <span class="token operator" >&amp;&amp;</span> <span class="token operator" >!</span>data<span class="token punctuation" >.</span>repositories<span class="token punctuation" >[</span>i<span class="token punctuation" >]</span><span class="token punctuation" >.</span>has_wiki<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
                            <span class="token keyword" >continue</span><span class="token punctuation" >;</span>
                        <span class="token punctuation" >}</span>

                        repos<span class="token punctuation" >.</span><span class="token function" >push</span><span class="token punctuation" >(</span>data<span class="token punctuation" >.</span>repositories<span class="token punctuation" >[</span>i<span class="token punctuation" >]</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
                    <span class="token punctuation" >}</span>

                    repos<span class="token punctuation" >.</span><span class="token function" >sort</span><span class="token punctuation" >(</span><span class="token keyword" >function</span><span class="token punctuation" >(</span>a<span class="token punctuation" >,</span> b<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
                        <span class="token keyword" >var</span> aDate <span class="token operator" >=</span> <span class="token keyword" >new</span> <span class="token class-name" >Date</span><span class="token punctuation" >(</span>a<span class="token punctuation" >.</span>last_updated<span class="token punctuation" >)</span><span class="token punctuation" >.</span><span class="token function" >valueOf</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
                            bDate <span class="token operator" >=</span> <span class="token keyword" >new</span> <span class="token class-name" >Date</span><span class="token punctuation" >(</span>b<span class="token punctuation" >.</span>last_updated<span class="token punctuation" >)</span><span class="token punctuation" >.</span><span class="token function" >valueOf</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

                        <span class="token keyword" >if</span> <span class="token punctuation" >(</span>aDate <span class="token operator" >===</span> bDate<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
                            <span class="token keyword" >return</span> <span class="token number" >0</span><span class="token punctuation" >;</span>
                        <span class="token punctuation" >}</span>
                        <span class="token keyword" >return</span> aDate <span class="token operator" >></span> bDate <span class="token operator" >?</span> <span class="token operator" >-</span><span class="token number" >1</span> <span class="token punctuation" >:</span> <span class="token number" >1</span><span class="token punctuation" >;</span>
                    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

                    <span class="token keyword" >if</span> <span class="token punctuation" >(</span>options<span class="token punctuation" >.</span>count<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
                        repos<span class="token punctuation" >.</span><span class="token function" >splice</span><span class="token punctuation" >(</span>options<span class="token punctuation" >.</span>count<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
                    <span class="token punctuation" >}</span>

                    <span class="token function" >render</span><span class="token punctuation" >(</span>options<span class="token punctuation" >.</span>user<span class="token punctuation" >,</span> options<span class="token punctuation" >.</span>target<span class="token punctuation" >,</span> repos<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
                <span class="token punctuation" >}</span>
            <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
        <span class="token punctuation" >}</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span></code></pre>
<p>Notice that the anchor tag’s href needs to be stripped and lowercased and this does the trick,</p>
<pre class="language-js"><code class="language-js">repos<span class="token punctuation" >[</span>i<span class="token punctuation" >]</span><span class="token punctuation" >.</span>name<span class="token punctuation" >.</span><span class="token function" >replace</span><span class="token punctuation" >(</span><span class="token regex" >/\s+/g</span><span class="token punctuation" >,</span> <span class="token string" >'-'</span><span class="token punctuation" >)</span><span class="token punctuation" >.</span><span class="token function" >toLowerCase</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span></code></pre>

                </p>
            </article>
        </section>
    </main>
    <footer>
        Authored by Walker Randolph Smith
    </footer>
  </body>
</html>
