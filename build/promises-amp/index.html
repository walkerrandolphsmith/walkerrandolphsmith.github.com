<!doctype html>
<html ⚡>
  <head>
    <title>Walker Randolph Smith</title>
    <meta name="description" content="From callbacks to promises." />
    <meta name="author" content="Walker Randolph Smith" />
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="canonical" href="http://walkerrandolphsmith.github.com/" />
    
    <link rel="amphtml" href="http://www.walkerrandolphsmith.com/promises-amp-amp/">
    <link rel="alternate" type="application/rss+xml" title="Walker Randolph Smith" href="http://www.walkerrandolphsmith.com/rss/">
    
    <meta name="referrer" content="no-referrer-when-downgrade">
    
    <link rel="icon" type="image/png" href="http://www.walkerrandolphsmith.com/css/images/profile.png" />
    <link rel="apple-touch-icon" sizes="57x57" href="http://www.walkerrandolphsmith.com/css/images/apple-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="http://www.walkerrandolphsmith.com/css/images/apple-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="http://www.walkerrandolphsmith.com/css/images/apple-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="http://www.walkerrandolphsmith.com/css/images/apple-icon-144x144.png" />
    
    <meta property="og:site_name" content="Walker Randolph Smith" />
    <meta property="og:title" content="Promises-amp" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="http://www.walkerrandolphsmith.com/promises-amp" />
    <meta property="og:description" content="From callbacks to promises." />
    <meta property="og:image" content="http://www.walkerrandolphsmith.com/css/images/default.jpg" />
    <meta property="og:image:width" content="1920">
    <meta property="og:image:height" content="1080">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Promises-amp">
    <meta name="twitter:description" content="From callbacks to promises.">
    <meta name="twitter:url" content="http://www.walkerrandolphsmith.com/promises-amp">
    <meta name="twitter:image" content="http://www.walkerrandolphsmith.com/css/images/default.jpg">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="Walker Randolph Smith">
    <style amp-custom>
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        h1 {
            margin-left: 20px;
            font-size: 2em;
            font-weight: 600;
            line-height: 62px;
            letter-spacing: -1px;
            color: #373737;
        }
        header ul {
            margin-right: 20px;
        }
        article {
            padding: 90px;
        }
        h2 {
            margin: 50px 0 30px;
            font-size: 28px;
            font-weight: 600;
            line-height: 44px;
            letter-spacing: -1px;
            color: #494a50;
        }

        h3 {
            margin: 50px 0 30px;
            font-size: 28px;
            font-weight: 400;
            line-height: 44px;
            letter-spacing: -1px;
            color: #b2b2b2;
        }
        p {
            font-weight: 400;
            font-size: 17px;
            line-height: 32px;
            margin: 20px 0 65px;
            color: #62646c;
        }
        ul, ol {
            list-style: none;
        }

        pre {
          padding: 2em;
        }

        code, pre {
          font-family: Consolas, Menlo, Monaco, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", "Nimbus Mono L", "Courier New", Courier, monospace;
          font-size: 14px;
          line-height: 1.375;
          direction: ltr;
          text-align: left;
          white-space: pre;
          word-spacing: normal;
          word-break: normal;

          -moz-tab-size: 4;
          -o-tab-size: 4;
          tab-size: 4;

          -webkit-hyphens: none;
          -moz-hyphens: none;
          -ms-hyphens: none;
          hyphens: none;
          background: #faf8f5;
          line-height: 30px;

          margin: .5em 0;
          overflow: auto;
        }

        p > code {
          padding: 0.5em;
        }

        code[class*="language-"],
        pre[class*="language-"] {
          color: #728fcb;
        }

        pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
        code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
          text-shadow: none;
          background: #faf8f5;
        }

        pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
        code[class*="language-"]::selection, code[class*="language-"] ::selection {
          text-shadow: none;
          background: #faf8f5;
        }

        pre[class*="language-"] {
          padding: 1em;
          margin: .5em 0;
          overflow: auto;
        }

        :not(pre) > code[class*="language-"] {
          padding: .1em;
          border-radius: .3em;
        }

        .token.comment,
        .token.prolog,
        .token.doctype,
        .token.cdata {
          color: #b6ad9a;
        }

        .token.punctuation {
          color: #b6ad9a;
        }

        .token.namespace {
          opacity: .7;
        }

        .token.tag,
        .token.operator,
        .token.number {
          color: #063289;
        }

        .token.property,
        .token.function {
          color: #b29762;
        }

        .token.tag-id,
        .token.selector,
        .token.atrule-id {
          color: #2d2006;
        }

        code.language-javascript,
        .token.attr-name {
          color: #896724;
        }

        code.language-css,
        code.language-scss,
        .token.boolean,
        .token.string,
        .token.entity,
        .token.url,
        .language-css .token.string,
        .language-scss .token.string,
        .style .token.string,
        .token.attr-value,
        .token.keyword,
        .token.control,
        .token.directive,
        .token.unit,
        .token.statement,
        .token.regex,
        .token.atrule {
          color: #728fcb;
        }

        .token.placeholder,
        .token.variable {
          color: #93abdc;
        }

        .token.deleted {
          text-decoration: line-through;
        }

        .token.inserted {
          border-bottom: 1px dotted #2d2006;
          text-decoration: none;
        }

        .token.italic {
          font-style: italic;
        }

        .token.important,
        .token.bold {
          font-weight: bold;
        }

        .token.important {
          color: #896724;
        }

        .token.entity {
          cursor: help;
        }

        pre > code.highlight {
          outline: .4em solid #896724;
          outline-offset: .4em;
        }

        .line-numbers .line-numbers-rows {
          border-right-color: #ece8de;
        }

        .line-numbers-rows > span:before {
          color: #cdc4b1;
        }

        .line-highlight {
          background: rgba(45, 32, 6, 0.2);
          background: -webkit-linear-gradient(left, rgba(45, 32, 6, 0.2) 70%, rgba(45, 32, 6, 0));
          background: linear-gradient(to right, rgba(45, 32, 6, 0.2) 70%, rgba(45, 32, 6, 0));
        }

        footer {
            padding-left: 90px;
        }
    </style>

    <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Article",
      "headline": "Promises",
      "datePublished": "1477775004363",
      "description": "From callbacks to promises.",
      "author": {
        "@type": "Person",
        "name": "Walker Randolph Smith"
      },
      "image": {
        "@type": "ImageObject",
        "url": "http://www.walkerrandolphsmith.com/css/images/default.jpg",
        "height": 2000,
        "width": 800
      }
    }
    </script>
    <script async custom-element="amp-carousel" src="https://cdn.ampproject.org/v0/amp-carousel-0.1.js"></script>
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <script async src="https://cdn.ampproject.org/v0.js"></script>
  </head>
  <body>
    <main>
        <section class="post-item post-title">
            <header>
                <h1>Promises</h1>
                <ul class="meta">
                    <li class="date">
                        <time datetime="October 29, 2016">October 29, 2016</time>
                    </li>
                    <li>
                        <a href="http://www.walkerrandolphsmith.com/promises" title=Promises">View the original article.</a>
                    </li>
                    <li style="display: none;">
                        <a href="http://www.walkerrandolphsmith.com/resume/" class="author">
                            <img src="http://www.walkerrandolphsmith.com/css/images/kakashi.png" alt="Walker Randolph Smith" data-no-retina="true">
                            <span>Walker Randolph Smith</span>
                        </a>
                    </li>
                </ul>
            </header>
            <amp-img src="http://www.walkerrandolphsmith.com/css/images/default.jpg"
                 width="264" height="96" layout="responsive">
            </amp-img>
        </section>
        <section>
            <article>
                <p>
                  Asynchronous programming in Javascript involves a control flow that is not sequential like what is
expected from most programming languages. This non-sequence nature is due to the result of a function
not being available immediately. In this scenario the program continues execution despite the result of the first
function not returning and the subsequent operations on that result not occurring. Asynchronous code may be a result of
physical limitations causing the reults to not be instant or guaranteed like file IO and network requests.
Asynchronous programming can be a challenging task and it has evolved quite a bit in Javascript since I began programming.
In a few short years I have solved this problem like many other Javascript developers: using callbacks, promises, and now
even <code>async</code> and <code>await</code>. Each of these approaches changes the structure of the asynchronous code as well as the control flow.
For many people seeing the differences between these techniques will actually feel like a stroll down memory lane.
<h2 id="callbacks">callbacks</h2>
<p>The first technique I learned involved a pattern called callbacks. This term describes a technique of invoking a “callback”
function that will operate on the results of an asynchronous function invocation when the result is available. As mentioned
file IO is a great example of asynchronous code. Consider reading a file from disk:</p>
<div class="code-wrapper"><pre class="language-js"><code class="language-js"><span class="token keyword" >const</span> contents <span class="token operator" >=</span> fs<span class="token punctuation" >.</span><span class="token function" >readFile</span><span class="token punctuation" >(</span><span class="token string" >"my-file"</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
console<span class="token punctuation" >.</span><span class="token function" >log</span><span class="token punctuation" >(</span>contents<span class="token punctuation" >)</span></code></pre><i class="fa fa-copy"></i></div><p>Unlike synchronous functions, <code>undefined</code> will be printed as contents because the file’s contents have not yet been read from disk.
However if we need to perform an action with contents of the file we can accomplish this with a callback function.</p>
<div class="code-wrapper"><pre class="language-js"><code class="language-js"><span class="token keyword" >const</span> action <span class="token operator" >=</span> <span class="token punctuation" >(</span>error<span class="token punctuation" >,</span> contents<span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    <span class="token keyword" >if</span><span class="token punctuation" >(</span>error<span class="token punctuation" >)</span> console<span class="token punctuation" >.</span><span class="token function" >log</span><span class="token punctuation" >(</span>error<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    <span class="token keyword" >else</span> console<span class="token punctuation" >.</span><span class="token function" >log</span><span class="token punctuation" >(</span><span class="token string" >"File was read! "</span><span class="token punctuation" >,</span> contents<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>
fs<span class="token punctuation" >.</span><span class="token function" >readFile</span><span class="token punctuation" >(</span><span class="token string" >"my-file"</span><span class="token punctuation" >,</span> action<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
console<span class="token punctuation" >.</span><span class="token function" >log</span><span class="token punctuation" >(</span><span class="token string" >"end"</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span></code></pre><i class="fa fa-copy"></i></div><p>In this example <code>action</code> is a callback function that will print the contents of the file when they have <strong>eventually</strong>
been retrieved. Understanding this code is not too difficult but is critical to understand the order in which things occur.
First the callback function, action, is declared. Then the <code>readFile</code> function is invoked. Immediately afterwards
<code>&quot;end&quot;</code> is printed to the console. Lastly the error or contents are printed to the console despite appearing
in the script prior to the last console statement. Callbacks allow us to handle asynchronous programming, great.
One common issue that occurs when using callbacks is described as <code>callback hell</code>. Often we find code in which
more asynchronous functions are called within the context of a callback function. Sticking with the file IO example lets
consider reading all files from a directory.</p>
<div class="code-wrapper"><pre class="language-js"><code class="language-js">fs<span class="token punctuation" >.</span><span class="token function" >readdir</span><span class="token punctuation" >(</span><span class="token string" >'my-dir'</span><span class="token punctuation" >,</span> <span class="token punctuation" >(</span>error<span class="token punctuation" >,</span> files<span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    <span class="token keyword" >if</span><span class="token punctuation" >(</span>error<span class="token punctuation" >)</span> <span class="token keyword" >return</span> error<span class="token punctuation" >;</span>
    files<span class="token punctuation" >.</span><span class="token function" >forEach</span><span class="token punctuation" >(</span>file <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
        fs<span class="token punctuation" >.</span><span class="token function" >readFile</span><span class="token punctuation" >(</span>file<span class="token punctuation" >,</span> <span class="token punctuation" >(</span>err<span class="token punctuation" >,</span> contents<span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
            <span class="token keyword" >if</span><span class="token punctuation" >(</span>err<span class="token punctuation" >)</span> <span class="token keyword" >return</span> err<span class="token punctuation" >;</span>
            console<span class="token punctuation" >.</span><span class="token function" >log</span><span class="token punctuation" >(</span>contents<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
        <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span></code></pre><i class="fa fa-copy"></i></div><p>In this example a callback function is passed to <code>readdir</code> that performs some action once the directory has been read from disk.
Within that callback function, the retrieved files are iterated over and each read, which required another callback function
to handle the contents of the file read when the operation has completed. There are a few side effects of writing this code as
seen. It is very difficult to wrap the inner most callback function under test. Over shadowing of variables
like <code>error</code> become more likely. In this example I differentiated between the two with <code>error</code> and <code>err</code>. Is <code>readdirError</code>
and <code>readFileError</code> better? Likely not and the more nested asynchronous calls that are made the more difficult this naming
becomes. It also complicates the intention, read files from a directory, with the implementation details of doing so.
Lastly one common complaint of this code gives rise to the term callback hell, the further and further indentation of the callback functions.
The trail of <code>});</code> symbols at the end indicates how deeply nested this block has become. One solution to avoid this deep nesting is to
declare each callback function instead of using anonymous functions. This allows the function to be written with the same
indentation as the top level call to <code>readdir</code>.</p>
<h2 id="promises">promises</h2>
<p>A promise is an alternative construct that enables us to write more readable asynchronous code. Before the advent of ES2015 there
were many great node modules like <code>Q</code>, <code>bluebird</code>, <code>RSVP</code>, and many more that provided promises. Now Promise is a first class
citizen of the language. So what is a promise? It is merely a function that is passed the arguments resolve and reject.
The function is executed immediately by the Promise implementation, passing resolve and reject functions and after
some asynchronous work is complete the resolve or reject functions are called. As describe by MDN, a Promise is a proxy
for a value that has yet to be determined. A promise begins in a pending state and once the asynchronous call has completed
it is fulfilled with a value or rejected with an error. Upon its fulfillment or rejection a promise is ready to invoke a callback function.</p>
<div class="code-wrapper"><pre class="language-js"><code class="language-js"><span class="token keyword" >const</span> handler <span class="token operator" >=</span> <span class="token punctuation" >(</span>err<span class="token punctuation" >,</span> response<span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    <span class="token keyword" >if</span><span class="token punctuation" >(</span>err<span class="token punctuation" >)</span> <span class="token keyword" >return</span> err<span class="token punctuation" >;</span>
    <span class="token keyword" >else</span> <span class="token keyword" >return</span> response<span class="token punctuation" >.</span><span class="token function" >text</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span><span class="token punctuation" >;</span>
<span class="token function" >fetch</span><span class="token punctuation" >(</span><span class="token string" >'http://resource'</span><span class="token punctuation" >)</span><span class="token punctuation" >.</span><span class="token function" >then</span><span class="token punctuation" >(</span>handler<span class="token punctuation" >)</span><span class="token punctuation" >;</span></code></pre><i class="fa fa-copy"></i></div><p>The <code>then</code> and <code>catch</code> function also return a promise so calls to them can be chained.</p>
<div class="code-wrapper"><pre class="language-js"><code class="language-js"><span class="token function" >fetch</span><span class="token punctuation" >(</span><span class="token string" >'http://resource'</span><span class="token punctuation" >)</span>
    <span class="token punctuation" >.</span><span class="token function" >then</span><span class="token punctuation" >(</span>res <span class="token operator" >=</span><span class="token operator" >></span> res<span class="token punctuation" >.</span><span class="token function" >text</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >)</span>
    <span class="token punctuation" >.</span><span class="token function" >then</span><span class="token punctuation" >(</span>text <span class="token operator" >=</span><span class="token operator" >></span> <span class="token function" >convertToXML</span><span class="token punctuation" >(</span>text<span class="token punctuation" >)</span><span class="token punctuation" >)</span>
    <span class="token punctuation" >.</span><span class="token function" >then</span><span class="token punctuation" >(</span>xml <span class="token operator" >=</span><span class="token operator" >></span> <span class="token function" >convertToJson</span><span class="token punctuation" >(</span>xml<span class="token punctuation" >)</span><span class="token punctuation" >)</span>
    <span class="token punctuation" >.</span><span class="token keyword" >catch</span><span class="token punctuation" >(</span>err <span class="token operator" >=</span><span class="token operator" >></span> console<span class="token punctuation" >.</span><span class="token function" >log</span><span class="token punctuation" >(</span>err<span class="token punctuation" >)</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span></code></pre><i class="fa fa-copy"></i></div><p>Often we find ourselves needing to wait for many asynchronous calls to be resolved before taking action. Consider
making a http request to a resource like the previous example and the response contained ids needed to make subsequent
http request for more detailed data. We can use <code>Promise.all</code> to ensure every promise has been fulfilled before invoking our
callback function by passing an array of promises and/or scalar values to the function.</p>
<div class="code-wrapper"><pre class="language-js"><code class="language-js"><span class="token function" >fetch</span><span class="token punctuation" >(</span><span class="token string" >'http://resource'</span><span class="token punctuation" >)</span>
    <span class="token punctuation" >.</span><span class="token function" >then</span><span class="token punctuation" >(</span>res <span class="token operator" >=</span><span class="token operator" >></span> res<span class="token punctuation" >.</span><span class="token function" >text</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >)</span>
    <span class="token punctuation" >.</span><span class="token function" >then</span><span class="token punctuation" >(</span>text <span class="token operator" >=</span><span class="token operator" >></span> <span class="token function" >convertToXML</span><span class="token punctuation" >(</span>text<span class="token punctuation" >)</span><span class="token punctuation" >)</span>
    <span class="token punctuation" >.</span><span class="token function" >then</span><span class="token punctuation" >(</span>xml <span class="token operator" >=</span><span class="token operator" >></span> <span class="token function" >convertToJson</span><span class="token punctuation" >(</span>xml<span class="token punctuation" >)</span><span class="token punctuation" >)</span>
    <span class="token punctuation" >.</span><span class="token function" >then</span><span class="token punctuation" >(</span>items <span class="token operator" >=</span><span class="token operator" >></span> Promise<span class="token punctuation" >.</span><span class="token function" >all</span><span class="token punctuation" >(</span>
        items<span class="token punctuation" >.</span><span class="token function" >map</span><span class="token punctuation" >(</span>i <span class="token operator" >=</span><span class="token operator" >></span> <span class="token function" >fetch</span><span class="token punctuation" >(</span><span class="token template-string" ><span class="token string" >`http://resource/details/</span><span class="token interpolation" ><span class="token interpolation-punctuation punctuation" >${</span>i<span class="token punctuation" >.</span>id<span class="token interpolation-punctuation punctuation" >}</span></span><span class="token string" >`</span></span><span class="token punctuation" >)</span><span class="token punctuation" >)</span>
    <span class="token punctuation" >)</span><span class="token punctuation" >)</span>
    <span class="token punctuation" >.</span><span class="token keyword" >catch</span><span class="token punctuation" >(</span>err <span class="token operator" >=</span><span class="token operator" >></span> console<span class="token punctuation" >.</span><span class="token function" >log</span><span class="token punctuation" >(</span>err<span class="token punctuation" >)</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span></code></pre><i class="fa fa-copy"></i></div><h2 id="async-await">async await</h2>
<p>Now ES2016 has described a new language feature to help us handle promises with the keywords <code>async</code> and <code>await</code>!
A function can de decorated with the <code>async</code> keyword that indicates it returns a Promise.
It’s invocation can be decorated with the <code>await</code> keyword which allows us to read and write asynchronous code synchronously.
The await keyword indicates there is a blocking call and further execution will wait for the promises resolution.</p>
<div class="code-wrapper"><pre class="language-js"><code class="language-js"><span class="token keyword" >const</span> getItems <span class="token operator" >=</span> <span class="token keyword" >async</span> <span class="token function" >fetch</span><span class="token punctuation" >(</span><span class="token string" >'http://resource'</span><span class="token punctuation" >)</span>
    <span class="token punctuation" >.</span><span class="token function" >then</span><span class="token punctuation" >(</span>res <span class="token operator" >=</span><span class="token operator" >></span> res<span class="token punctuation" >.</span>body<span class="token punctuation" >)</span><span class="token punctuation" >;</span>

<span class="token keyword" >const</span> items <span class="token operator" >=</span> <span class="token keyword" >await</span> <span class="token function" >getItems</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
console<span class="token punctuation" >.</span><span class="token function" >log</span><span class="token punctuation" >(</span>items<span class="token punctuation" >)</span><span class="token punctuation" >;</span></code></pre><i class="fa fa-copy"></i></div><p>In the previous example printing items is not <code>undefined</code>! Now we can write asynchronous code as if it were synchronous.
The subsequent lines are not executed until <code>getItems</code> has resolved or rejected the Promise.
In the case of a rejection the caller of getItems can be wrapped in a <code>try</code>/<code>catch</code> statement.</p>
<div class="code-wrapper"><pre class="language-js"><code class="language-js"><span class="token keyword" >try</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >const</span> items <span class="token operator" >=</span> <span class="token keyword" >await</span> <span class="token function" >getItems</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    console<span class="token punctuation" >.</span><span class="token function" >log</span><span class="token punctuation" >(</span>items<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span> <span class="token keyword" >catch</span><span class="token punctuation" >(</span>exception<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    console<span class="token punctuation" >.</span><span class="token function" >log</span><span class="token punctuation" >(</span><span class="token string" >"Oh no an error"</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span></code></pre><i class="fa fa-copy"></i></div><p>The synchronous structure has eliminated the every growing indentation of callback hell. Unfortunately this is not part
 of the ES2015 specification so in order to use this feature you’ll need a bit of configuration.
The async-await node module can be a good candidate if your environment does not support <code>generators</code> because the module
is built on node-fibers allowing a function to be suspended without blocking Node’s event loop. In my case I was already
using a JavaScript transpiler, Babel, and able to configure it with an additional plugin to get the new feature.
First I had to install the module using <code>npm install babel-plugin-transform-async-to-generator</code> and then update my babel configuration.</p>
<div class="code-wrapper"><pre><code>{
  "plugins": ["transform-async-to-generator"]
}</code></pre><i class="fa fa-copy"></i></div>
                </p>
            </article>
        </section>
    </main>
    <footer>
        Authored by Walker Randolph Smith
    </footer>
  </body>
</html>
