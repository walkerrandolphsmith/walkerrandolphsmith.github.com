<!doctype html>
<html âš¡>
  <head>
    <title>Walker Randolph Smith</title>
    <meta name="description" content="Creating a single page application." />
    <meta name="author" content="Walker Randolph Smith" />
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="canonical" href="http://walkerrandolphsmith.github.com/" />
    
    <link rel="amphtml" href="http://localhost:3000/knockout-and-durandal-amp-amp/">
    <link rel="alternate" type="application/rss+xml" title="Walker Randolph Smith" href="http://localhost:3000/rss/">
    
    <meta name="referrer" content="no-referrer-when-downgrade">
    
    <link rel="icon" type="image/png" href="http://localhost:3000/css/images/apple-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="57x57" href="http://localhost:3000/css/images/apple-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="http://localhost:3000/css/images/apple-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="http://localhost:3000/css/images/apple-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="http://localhost:3000/css/images/apple-icon-144x144.png" />
    
    <meta property="og:site_name" content="Walker Randolph Smith" />
    <meta property="og:title" content="Knockout and Durandal-amp" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="http://localhost:3000/knockout-and-durandal-amp" />
    <meta property="og:description" content="Creating a single page application." />
    <meta property="og:image" content="http://localhost:3000/css/images/heroes/city.jpg" />
    <meta property="og:image:width" content="1920">
    <meta property="og:image:height" content="1080">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Knockout and Durandal-amp">
    <meta name="twitter:description" content="Creating a single page application.">
    <meta name="twitter:url" content="http://localhost:3000/knockout-and-durandal-amp">
    <meta name="twitter:image" content="http://localhost:3000/css/images/heroes/city.jpg">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="Walker Randolph Smith">
    <style amp-custom>
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 90px;
        }
        h1 {
            margin-left: 20px;
            font-size: 2em;
            font-weight: 600;
            line-height: 62px;
            letter-spacing: -1px;
            color: #373737;
        }
        header ul {
            margin-right: 20px;
        }
        article {
            padding: 25px 90px;
        }
        h2 {
            margin: 50px 0 30px;
            font-size: 28px;
            font-weight: 600;
            line-height: 44px;
            letter-spacing: -1px;
            color: #494a50;
        }

        h3 {
            margin: 50px 0 30px;
            font-size: 28px;
            font-weight: 400;
            line-height: 44px;
            letter-spacing: -1px;
            color: #b2b2b2;
        }
        p {
            font-weight: 400;
            font-size: 17px;
            line-height: 32px;
            margin: 20px 0 65px;
            color: #62646c;
        }
        ul, ol {
            list-style: none;
        }

        pre {
          padding: 2em;
        }

        code, pre {
          font-family: Consolas, Menlo, Monaco, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", "Nimbus Mono L", "Courier New", Courier, monospace;
          font-size: 14px;
          line-height: 1.375;
          direction: ltr;
          text-align: left;
          white-space: pre;
          word-spacing: normal;
          word-break: normal;

          -moz-tab-size: 4;
          -o-tab-size: 4;
          tab-size: 4;

          -webkit-hyphens: none;
          -moz-hyphens: none;
          -ms-hyphens: none;
          hyphens: none;
          background: #faf8f5;
          line-height: 30px;

          margin: .5em 0;
          overflow: auto;
        }

        p > code {
          padding: 0.5em;
        }

        code[class*="language-"],
        pre[class*="language-"] {
          color: #728fcb;
        }

        pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
        code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
          text-shadow: none;
          background: #faf8f5;
        }

        pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
        code[class*="language-"]::selection, code[class*="language-"] ::selection {
          text-shadow: none;
          background: #faf8f5;
        }

        pre[class*="language-"] {
          padding: 1em;
          margin: .5em 0;
          overflow: auto;
        }

        :not(pre) > code[class*="language-"] {
          padding: .1em;
          border-radius: .3em;
        }

        .token.comment,
        .token.prolog,
        .token.doctype,
        .token.cdata {
          color: #b6ad9a;
        }

        .token.punctuation {
          color: #b6ad9a;
        }

        .token.namespace {
          opacity: .7;
        }

        .token.tag,
        .token.operator,
        .token.number {
          color: #063289;
        }

        .token.property,
        .token.function {
          color: #b29762;
        }

        .token.tag-id,
        .token.selector,
        .token.atrule-id {
          color: #2d2006;
        }

        code.language-javascript,
        .token.attr-name {
          color: #896724;
        }

        code.language-css,
        code.language-scss,
        .token.boolean,
        .token.string,
        .token.entity,
        .token.url,
        .language-css .token.string,
        .language-scss .token.string,
        .style .token.string,
        .token.attr-value,
        .token.keyword,
        .token.control,
        .token.directive,
        .token.unit,
        .token.statement,
        .token.regex,
        .token.atrule {
          color: #728fcb;
        }

        .token.placeholder,
        .token.variable {
          color: #93abdc;
        }

        .token.deleted {
          text-decoration: line-through;
        }

        .token.inserted {
          border-bottom: 1px dotted #2d2006;
          text-decoration: none;
        }

        .token.italic {
          font-style: italic;
        }

        .token.important,
        .token.bold {
          font-weight: bold;
        }

        .token.important {
          color: #896724;
        }

        .token.entity {
          cursor: help;
        }

        pre > code.highlight {
          outline: .4em solid #896724;
          outline-offset: .4em;
        }

        .line-numbers .line-numbers-rows {
          border-right-color: #ece8de;
        }

        .line-numbers-rows > span:before {
          color: #cdc4b1;
        }

        .line-highlight {
          background: rgba(45, 32, 6, 0.2);
          background: -webkit-linear-gradient(left, rgba(45, 32, 6, 0.2) 70%, rgba(45, 32, 6, 0));
          background: linear-gradient(to right, rgba(45, 32, 6, 0.2) 70%, rgba(45, 32, 6, 0));
        }

        footer {
            padding-left: 90px;
            padding-bottom: 25px;
        }
    </style>

    <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Article",
      "headline": "Knockout and Durandal",
      "datePublished": "Mon Apr 14 2014 20:00:00 GMT-0400 (EDT)",
      "description": "Creating a single page application.",
      "author": {
        "@type": "Person",
        "name": "Walker Randolph Smith"
      },
      "image": {
        "@type": "ImageObject",
        "url": "http://localhost:3000/css/images/heroes/city.jpg",
        "height": 2000,
        "width": 800
      }
    }
    </script>
    <script async custom-element="amp-carousel" src="https://cdn.ampproject.org/v0/amp-carousel-0.1.js"></script>
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <script async src="https://cdn.ampproject.org/v0.js"></script>
  </head>
  <body>
    <main>
        <section class="post-item post-title">
            <header>
                <h1>Knockout and Durandal</h1>
                <ul class="meta">
                    <li class="date">
                        <time datetime="April 14, 2014">April 14, 2014</time>
                    </li>
                    <li>
                        <a href="http://localhost:3000/knockout-and-durandal" title=Knockout and Durandal">View the original article.</a>
                    </li>
                    <li style="display: none;">
                        <a href="http://localhost:3000/resume/" class="author">
                            <img src="http://localhost:3000/css/images/logo-dark.png" alt="Walker Randolph Smith" data-no-retina="true">
                            <span>Walker Randolph Smith</span>
                        </a>
                    </li>
                </ul>
            </header>
        </section>
        <section>
            <article>
                <p>
                  Single page applications are web applications contained on a single HTML file that are dynamically updated using client side JavaScript in response to user interactions.
This article will discuss creating a SPA using Durandal and Knockout. This technology stack leverages a variation on
the traditional Model View Controller pattern called Model-View-View Model, <strong>MVVM</strong>, which a design pattern for building user interfaces.
The pattern divides the user interface into three major components.
The Models represent the applicationâ€™s stored data. Ajax can be used with server-side code to read and write the stored model data.
The View-Models are JavaScript objects that represent a subset of data and operations on that data required by a specific user interface to render.
The Views are UI components that graphically expose the View-Model data and operations.
Durandal is one of many JavaScript frameworks that leverage this design pattern. One emerging giant is Angular and yesterday it was announced, <a href="http://eisenbergeffect.bluespire.com/angular-and-durandal-converge/">here</a>, on Twitter that Durandal and Angular will converge!
<h2><a name="dependency-management" class="anchor" href="#dependency-management"></a>Dependency Management</h2><p>Require.Js supports the AMD, Asynchronous Module Definition, API to enable application to manage JavaScript dependencies. JavaScript libraries are loaded by HTML script tags in which the order of the libraries in the tag determine when they are loaded.
The dependecy of one library on another is weakly stated because the order in which the libraries occur in the script tag must be known by the developer.</p>
<p>Require.Js looks for a <code>data-main</code> attribute to start script loading in which modules are loaded relative to a base URL.
The index.html should contain a script tag with said attribute which indicates the module ID to load, in this case <code>main</code></p>
<div class="code-wrapper"><pre class="language-none line-numbers"><code class="language-none line-numbers"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">data-main</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>scripts/main.js<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>scripts/require.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="line-numbers-rows"><span></span></span></code></pre><i class="fa fa-copy"></i></div><p>The relative path can be configured in this script as follows:</p>
<div class="code-wrapper"><pre class="language-js line-numbers"><code class="language-js line-numbers">requirejs<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    baseUrl<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
    paths<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">'text'</span><span class="token punctuation">:</span> <span class="token string">'../Scripts/text'</span><span class="token punctuation">,</span>
        <span class="token string">'durandal'</span><span class="token punctuation">:</span> <span class="token string">'../Scripts/durandal'</span><span class="token punctuation">,</span>
        <span class="token string">'plugins'</span><span class="token punctuation">:</span> <span class="token string">'../Scripts/durandal/plugins'</span><span class="token punctuation">,</span>
        <span class="token string">'transitions'</span><span class="token punctuation">:</span> <span class="token string">'../Scripts/durandal/transitions'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><i class="fa fa-copy"></i></div><p>The next code block will be added to <code>main.js</code> and demonstrates the use of modules and the use of the define function to manage dependencies.</p>
<div class="code-wrapper"><pre class="language-js line-numbers"><code class="language-js line-numbers"><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'jquery'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> jQuery<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'knockout'</span><span class="token punctuation">,</span> ko<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'durandal/system'</span><span class="token punctuation">,</span> <span class="token string">'durandal/app'</span><span class="token punctuation">,</span> <span class="token string">'durandal/viewLocator'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
 <span class="token keyword">function</span> <span class="token punctuation">(</span>system<span class="token punctuation">,</span> app<span class="token punctuation">,</span> viewLocator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    system<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    app<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Durandal Starter Kit'</span><span class="token punctuation">;</span>

    app<span class="token punctuation">.</span><span class="token function">configurePlugins</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        router<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        dialog<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        widget<span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    app<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//Replace 'viewmodels' in the moduleId with 'views' to locate the view.</span>
        <span class="token comment" spellcheck="true">//Look for partial views in a 'views' folder in the root.</span>
        viewLocator<span class="token punctuation">.</span><span class="token function">useConvention</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//Show the app by setting the root view model with a transition.</span>
        app<span class="token punctuation">.</span><span class="token function">setRoot</span><span class="token punctuation">(</span><span class="token string">'viewmodels/shell'</span><span class="token punctuation">,</span> <span class="token string">'entrance'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><i class="fa fa-copy"></i></div><p>The define function is working with JavaScript modules opposed to script files to avoid global namespace issues.
Define can take an object literal or a function as a parameter if no dependencies exist.
If the module does have dependencies then the first argument to define is an array of dependency names.
The second argument, a function, called the factory function, returns an object that defines the module.
The dependency names in the array will be passed to this function as arguments and must be listed in the same order as they occur in the array.
In the code block above one define function has an array as the first argument and a function as the second argument.
The functionâ€™s arguments are system, app, and viewLocator and directly correspond with the elements of the array.
The second parameter is registered with the define function so the dependencies have been loaded and executed before passed as modules as arguments to the function.</p>
<h2><a name="durnadal" class="anchor" href="#durnadal"></a>Durnadal</h2><p>Using Durandal, within the body of this factory function a module, app, sets its root view to <code>viewmodels/shell</code>.
This indicates the View-Model that is initially loaded is named shell and resides in the <code>viewmodels</code> directory.
The View-Models have corresponding Views and are associated by name. Therefore there is also a shell View.
The shell View-Model will be used to handle the routing of our SPA.</p>
<div class="code-wrapper"><pre class="language-js line-numbers"><code class="language-js line-numbers"><span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token string">'plugins/router'</span><span class="token punctuation">,</span>
      <span class="token string">'durandal/app'</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span>
        router<span class="token punctuation">,</span>
        app
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token string">"use strict"</span><span class="token punctuation">;</span>

        <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
            router<span class="token punctuation">:</span> router<span class="token punctuation">,</span>
            activate<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                router<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>
                      route<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                      title<span class="token punctuation">:</span> <span class="token string">'Home'</span><span class="token punctuation">,</span>
                      moduleId<span class="token punctuation">:</span> <span class="token string">'viewmodels/home'</span><span class="token punctuation">,</span>
                      nav<span class="token punctuation">:</span> <span class="token boolean">true</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildNavigationModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token keyword">return</span> router<span class="token punctuation">.</span><span class="token function">activate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><i class="fa fa-copy"></i></div><p>Routes will be triggered when <code>router.navigate(&#39;your/hash/here&#39;);</code> is called or the typical trigger using an anchor, <code>a</code>, element.
The <code>shell</code> View is a simple <code>div</code> element with a <code>data-bind</code> attribute for the router.</p>
<div class="code-wrapper"><pre class="language-none line-numbers"><code class="language-none line-numbers"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container page-host<span class="token punctuation">"</span></span>
     <span class="token attr-name">data-bind</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>router: { transition:<span class="token punctuation">'</span>entrance<span class="token punctuation">'</span>, cacheViews:true }<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><i class="fa fa-copy"></i></div><h2><a name="knockout" class="anchor" href="#knockout"></a>Knockout</h2><p>Now that the shell of the application is configured we can discuss how Knockout can be used to create responsive UI with a clean data model.</p>
<p>Knockout has two features that make it awesome, dependency tracking to automatically update UI based on model.
declarative binding to connect components of the UI to the model. As shown in the routing above the default route has a moduleId <code>viewmodels/home</code>.</p>
<div class="code-wrapper"><pre class="language-js line-numbers"><code class="language-js line-numbers"><span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
        <span class="token string">"knockout"</span><span class="token punctuation">,</span>
        <span class="token string">"durandal/app"</span><span class="token punctuation">,</span>
        <span class="token string">"viewmodels/toDoItem/list"</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>
        ko<span class="token punctuation">,</span>
        app<span class="token punctuation">,</span>
        ToDoItems
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token string">"use strict"</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> isList <span class="token operator">=</span> ko<span class="token punctuation">.</span><span class="token function">observable</span><span class="token punctuation">(</span><span class="token string">"list"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
        tasksDueToday<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">ToDoItems</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    obj<span class="token punctuation">.</span>activate <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><i class="fa fa-copy"></i></div><p>This View-Model uses the define function to pass three modules into its factory function, including the View-Model, <code>list</code>.
One property of the list is tasksDueToday which is a <code>new</code> ToDoItems.
Notice ToDoItems was passed as a module to the factory function using the name list in the dependencies array.</p>
<p>The corresponding View for the home View-Model is using declarative binding to connect the View-Modelâ€™s tasksDueToday property and use dependency tracking to inject the View corresponding to the taskDueToday View-Model.</p>
<div class="code-wrapper"><pre class="language-none line-numbers"><code class="language-none line-numbers"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>To Do List<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>to-do-list<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token comment" spellcheck="true">&lt;!--ko compose: tasksDueToday--></span><span class="token comment" spellcheck="true">&lt;!--/ko--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span><span class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><i class="fa fa-copy"></i></div><p>The following is an example of a to do list with more features including
creating related tasks, adding labels, filtering by label, retrieving the list and its count.</p>
<div class="code-wrapper"><pre class="language-js line-numbers"><code class="language-js line-numbers"><span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
       <span class="token string">"durandal/app"</span><span class="token punctuation">,</span>
        <span class="token string">"models/TaskStatus"</span><span class="token punctuation">,</span>
        <span class="token string">"viewmodels/toDoItem/toDoItem"</span><span class="token punctuation">,</span>
        <span class="token string">"viewmodels/toDoItem/summary"</span><span class="token punctuation">,</span>
        <span class="token string">"viewmodels/toDoItem/new"</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>
        app<span class="token punctuation">,</span>
        TaskStatus<span class="token punctuation">,</span>
        ToDoItem<span class="token punctuation">,</span>
        ToDoItemSummary<span class="token punctuation">,</span>
        CreateToDoItem
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token string">"use strict"</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> ctor <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        self<span class="token punctuation">.</span>status <span class="token operator">=</span> ko<span class="token punctuation">.</span><span class="token function">observable</span><span class="token punctuation">(</span><span class="token string">'all'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        self<span class="token punctuation">.</span>items <span class="token operator">=</span> ko<span class="token punctuation">.</span><span class="token function">observableArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        self<span class="token punctuation">.</span>newTask <span class="token operator">=</span> ko<span class="token punctuation">.</span><span class="token function">observable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        self<span class="token punctuation">.</span>numberOfTasks <span class="token operator">=</span> ko<span class="token punctuation">.</span><span class="token function">computed</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'all'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> self<span class="token punctuation">.</span><span class="token function">items</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> self<span class="token punctuation">.</span><span class="token function">items</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>task<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> task<span class="token punctuation">.</span><span class="token function">toDoItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> self<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        self<span class="token punctuation">.</span>filteredItems <span class="token operator">=</span> ko<span class="token punctuation">.</span><span class="token function">computed</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'all'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> self<span class="token punctuation">.</span><span class="token function">items</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> self<span class="token punctuation">.</span><span class="token function">items</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> task<span class="token punctuation">.</span><span class="token function">toDoItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> self<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        self<span class="token punctuation">.</span>getItems <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>status<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">===</span> <span class="token string">'all'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> self<span class="token punctuation">.</span><span class="token function">items</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">return</span> ko<span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token function">arrayFilter</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span><span class="token function">items</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> st <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token function">toDoItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token punctuation">(</span>st <span class="token operator">===</span> status<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        self<span class="token punctuation">.</span>getNumberOfItems <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>status<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">===</span> <span class="token string">'all'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> self<span class="token punctuation">.</span><span class="token function">items</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">return</span> ko<span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token function">arrayFilter</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span><span class="token function">items</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> st <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token function">toDoItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token punctuation">(</span>st <span class="token operator">===</span> status<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token function">createNewTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        self<span class="token punctuation">.</span>addTask <span class="token operator">=</span> addTask<span class="token punctuation">;</span>
        self<span class="token punctuation">.</span>activate <span class="token operator">=</span> activate<span class="token punctuation">;</span>

        <span class="token keyword">function</span> <span class="token function">activate</span><span class="token punctuation">(</span>activationData<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>activationData <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            self<span class="token punctuation">.</span><span class="token function">items</span><span class="token punctuation">(</span>activationData<span class="token punctuation">.</span>items<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">addTask</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>task <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">var</span> newTask <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ToDoItemSummary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            newTask<span class="token punctuation">.</span><span class="token function">activate</span><span class="token punctuation">(</span><span class="token punctuation">{</span> toDoItem<span class="token punctuation">:</span> task <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            self<span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>newTask<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">createNewTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            newTask<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"task:removed"</span><span class="token punctuation">,</span> removeTask<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">createNewTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> newTask <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CreateToDoItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> newToDoItem <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ToDoItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            newToDoItem<span class="token punctuation">.</span><span class="token function">activate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                status<span class="token punctuation">:</span> TaskStatus<span class="token punctuation">.</span>unstarted<span class="token punctuation">.</span>label
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            newTask<span class="token punctuation">.</span><span class="token function">activate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                toDoItem<span class="token punctuation">:</span> newToDoItem
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            self<span class="token punctuation">.</span><span class="token function">newTask</span><span class="token punctuation">(</span>newTask<span class="token punctuation">)</span><span class="token punctuation">;</span>
            newTask<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"task:new:saved"</span><span class="token punctuation">,</span> addTask<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">removeTask</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> taskToRemove <span class="token operator">=</span> ko<span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token function">arrayFilter</span><span class="token punctuation">(</span>
                self<span class="token punctuation">.</span><span class="token function">items</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>toDoItem <span class="token operator">===</span> task<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

            self<span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>taskToRemove<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        self<span class="token punctuation">.</span>filterAll <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            self<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token string">'all'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        self<span class="token punctuation">.</span>filterUnstarted <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            self<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span>TaskStatus<span class="token punctuation">.</span>unstarted<span class="token punctuation">.</span>label<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        self<span class="token punctuation">.</span>filterStarted <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            self<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span>TaskStatus<span class="token punctuation">.</span>started<span class="token punctuation">.</span>label<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        self<span class="token punctuation">.</span>filterComplete <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            self<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span>TaskStatus<span class="token punctuation">.</span>complete<span class="token punctuation">.</span>label<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> ctor<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><i class="fa fa-copy"></i></div>
                </p>
            </article>
        </section>
    </main>
    <footer>
        Authored by Walker Randolph Smith
    </footer>
  </body>
</html>
